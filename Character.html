<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"">
	<meta name="apple-mobile-web-app-capable" content="yes" />
    <title>Doman H5</title>
    <link href="http://apps.bdimg.com/libs/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet">
    <script src="http://apps.bdimg.com/libs/jquery/2.0.0/jquery.min.js"></script>
    <script src="http://apps.bdimg.com/libs/bootstrap/3.3.0/js/bootstrap.min.js"></script>
    <style>
        .numInput {margin-top: 5px;}
		.btnNumber{max-width:100px; max-height:100px;}
    </style>
</head>
<body>
    <div class="container" id="divCharacters">
		<div class="panel panel-success">
			<div class="panel-heading" style="height:38px;">
				<h3 class="panel-title pull-left">乐果 汉字闪卡</h3>
				<a href="javascript:window.location='Home.html'" class="pull-right button-clear"> 
					<span class="glyphicon glyphicon-home"></span> 
					首页
				</a>
				<div></div>
			</div>
			<div class="panel-body">
				<div class="row">
					<div>
						<div>请输入汉字</div>
						<div>
							<textarea type="text" id="txtCharacters" style="width: 100%; height: 100px; vertical-align: top;"></textarea>
						</div>
					</div>
					<div>
						<button type="button" onclick="prepaireCharacters();" class="btn btn-info" style="width: 150px; height: 50px; margin-top: 10px; margin-right:3px;">重选</button>
						<button type="button" id="btnBegin" class="btn btn-primary" style="width: 150px; height: 50px; margin-top: 10px; margin-left:3px;">开始</button>
					</div>
					<div id="characterSet" style="display:none;">	一二三十木禾上下土个八入大天人火文六七儿九无口日中了子门月不开四五目耳头米见白田电也长山出飞马鸟云公车牛羊小少巾牙尺毛卜又心风力手水广升足走方半巴业本平书自已东西回片皮生里果几用鱼今正雨两瓜衣来年左右万百丁齐冬说友话春朋高你绿们花红草爷亲节的岁行古处声知多忙洗真认父扫母爸写全完关家看笑着兴画会妈合奶放午收女气太早去亮和李语秀千香听远唱定连向以更后意主总先起干明赶净同专工才级队蚂蚁前房空网诗黄林闭童立是我朵叶美机她过他时送让吗往吧得虫很河借姐呢呀哪谁凉怕量跟最园脸因阳为光可法石找办许别那到都吓叫再做象点像照沙海桥军竹苗井面乡忘想念王这从进边道贝男原爱虾跑吹乐地老快师短淡对热冷情拉活把种给吃练学习非苦常问伴间共伙汽分要没孩位选北湖南秋江只帮星请雪就球跳玩桃树刚兰座各带坐急名发成动晚新有么在变什条宜实色华谷金尽层丰壮波浪灯作字苹丽劳尤其区巨它安块站已甲豆识纷经如好娃洼于首枝枫记刘胡戏棋钢观弹琴养休伸甜歌院除息您牵困员青宁室样校切教响班欠元包钟叹哈迟闹及身仔细次外计怦礼加夕与川州台争民族亿洁欢祖旗帜庆曲央交市旁优阴坛城国图申匹互京泪洋拥抱相扬讲打指接惊故侯奇寸落补拔功助取所信沿拾际蛙错答还言每治棵挂哇怪慢怎思穿弯比服浅漂啦啊夫表示号汗伤吸极串免告诉狐狸猴颗斤折挑根独满容易采背板椅但傍清消由术吐注课铅笔桌景拿坏松扎抓祝福句幸之令布直当第现期轮路丑永饥饱温贫富户亚角周床病始张寻哭良食双体操场份粉昨晴姑娘妹读舟乘音客何汪丛牢拍护保物鸡猫羽领捉理跃蹦灵晨失觉扔掉眼睛纸船久乎至死腰捡粒被并夜喜重味轻刻群卫运宇宙航舰冲晒池浮灾害黑器岸纹洞影倒游圆围杯件住须能飘必事历史灭克化代孙植厂产介农科技纺织脱冻溪棉探摇野躲解未追店枯徐烧荣菜宿冈世界轰笋芽喊呼唤弟哥骨抽拐浇终静躺谢渐微瓦泉然结股脆塔杜鹃冒雷迈迷迹叔锋滴洒泥泞扑托摸利铃弱末芬芳夏应该岛展建纱环绕胜隐约省茂盛吾季留杏密蜜坡搭摘钉沟龙寿泼敬脚凤束府夺扮伟够恩柏特鲜度凰色勾单宫雄烁辉另题漫哄骗尔仍便票式且煌志提朗喝刀求使英整而丹乌显丝眨陈斜含炉鸣银泊柳艺忽杆涛转吴窗岭绝烟流垂乱压越彩蝉蛛岩趴刨陆质厚沉逃阵虹蜘蛛册宝印埋铁底导盏稠针稀碰兄商挤决钱批报破碎滑继续封骄傲拎桶停聪胳膊甸晃荡叭玲狗糟梯楼肯脑筋讶谈望算此桩肥灰讨厌冰蛋壳鸭欺负鹅翅膀勺斗玉组珍珠数钻研睡距离油检查团斥责炎夸奖亡肉耐谜传染类严寒坪坝戴招蝴蝶孔雀舞铜粗尾要装劲绒朝些钓察瓣拢掌趣爬峰顶似苍仰咱奋辫勇居郊散步胸脯渣或者敢惜低诚基突按摆弄准备侧胶卷辆秘杂社著藏悄闪坑臣推旅考秦纪遗究震促深忆异逢佳倍遥遍插精希却依拼命奔村抖丧磨坊扇枚邮爽柿仙梨菠萝粮紧杨艳内梦醒苏湿娇嫩强适昆播修致论试验袋证概减阻测括确误途超堂镜闲待阅腿随调简拜访具闻尘仆纳闷丘迎等止境授品暗降丈肢肌肤辽阔血液滋润创造县设参部横跨举击坚固栏案爪贵断楚孤帆蓝懒披划威武拣颜形状渔料辈汇欣赏映挡视线浸献药村软刮舌矛盾集持般架龟攻炮坦战神兵退挖鞋斧锯免屋抢难初管敌阶懂陶谦虚嘴恼怒吵感荒捧朴素值受愿姿势投况吞烈绪述普通鼓励育瓶系绳茶危险顺俩索激堵获矛担宽裕买猜糖即卡盼仁贴筝鹰端稳嚷橘墨斑闹宇宙荡衬赛拨警惕膝毫套倾探扎搂贯局昼耘未耕织桑蓬稚纶莓苔叮嘱排而幅却哈审肃晌悦悉诲例芝卵匀寸呆增隔壁搬烛慈肩捧匠伟砌跨创既毁固且案智慧登阶厅礼席灿烂党描敞椅议宾翠秆绣腹赤衫疾泛泡脱锐晃饲贪狭桂刺软触滑唇汁津腐虽味亭移泊愁旷萤簇烧喂盈寿合茄跪猛庙蹲镇须揉挨挤之莲胀姿仿裳翩随涛依否窃私汪类镜煤属珍诊职扶除疑效缺况编尝传延庆扬叠涌股螺旋桨掠励顾融腾掩盗铛偷碰株待窜撞桩捡锄魏箭猎雁弦悲惨愈痛
					</div>
				</div>
			</div>
		</div>
    </div>
	<!-- 添加canvas标签，并加上红色边框以便于在页面上查看 -->
	<canvas id="myCanvas" style="display: none;">您的浏览器不支持canvas标签。
	</canvas>
    <script type="text/javascript">


        //获取Canvas对象(画布)
        var canvas = document.getElementById("myCanvas");

        var clist = [];//汉字列表
		var cnum = 0;//当前汉字数号
		var characterTotal = 20;//闪汉字个数
		var stopFlash = false;//是否终止闪卡

        $(function () {

            resizeLayout();
            $(window).resize(function () {
                resizeLayout();
            })

            //简单地检测当前浏览器是否支持Canvas对象，以免在一些不支持html5的浏览器中提示语法错误
            if (!canvas.getContext) {
                alert("您的浏览器不支持html5，请更换浏览器");
                return;
            }

            //开始按钮
            $("#btnBegin").click(function () {
				stopFlash = false;
                var ctxt = $("#txtCharacters").val();
                if (ctxt == "") {
					alert("请输入要闪的汉字");
					return;
                }
                clist = ctxt.split("");
				cnum = 0;
				$("#divCharacters").hide();
				$("#myCanvas").show();
				flashCharacters();
            });

			//双击画布事件
            $("#myCanvas").dblclick(function () {
                stopFlash = true;
            });
			
			//准备闪卡汉字
			prepaireCharacters();
			
			//页面高度超过设备可见高度时，阻止掉touchmove事件
			document.body.addEventListener('touchmove', function (event) {
				event.preventDefault();
			}, false);
        });

		//准备闪卡汉字
		function prepaireCharacters(){
			var txtTemp = $("#characterSet").html();
			var ctxtTemp = "";
			for(var i=0;i<characterTotal;i++){
				var r = Math.random() * (txtTemp.length - 1);
				if(txtTemp.substr(r, 1) == ""){
					i--;
					continue;
				}
				ctxtTemp = ctxtTemp + txtTemp.substr(r, 1);
			}
			$("#txtCharacters").val(ctxtTemp);
		}
		
        //重置工作区高宽
        function resizeLayout() {
            var wh = $(window).height();
            var ww = $(window).width();
            $("body").css({ width: ww + "px", height: wh + "px" });
            canvas.width = ww;
            canvas.height = wh - 10;
			
			circleRadius = (ww < wh ? ww : wh) / 25;
        }

		//清屏
		function clearCanvas(){
            //canvas清除屏幕
            //canvas.width = canvas.width;
            var context = canvas.getContext("2d");
			context.fillStyle="#eee";
            context.clearRect(0, 0, canvas.width, canvas.height);
		}
		
		//汉字闪卡列表
		function flashCharacters(){
			//终止闪卡
			if(cnum == clist.length || stopFlash){
				doStopFlash();
				return;
			}
			var c = clist[cnum++];
			clearCanvas();
			drawInfoTxt(c);
			setTimeout("flashCharacters()", 1200);
		}
		
		//终止闪卡
		function doStopFlash(){
			clist = [];
			cnum = 0;
			$("#divCharacters").show();
			$("#myCanvas").hide();
		}

		//绘制汉字
		function drawInfoTxt(info){
			var ctx = canvas.getContext("2d");
			ctx.font = "250px Courier New";
			ctx.fillStyle = "#f33";
			var infow = ctx.measureText(info).width;
			//var infoh = ctx.measureText(info).height;
			ctx.fillText(info, (canvas.width - infow) / 2, canvas.height / 2);
		}

    </script>
</body>
</html>
